# TypeScript Library Template

This is a template repository for creating TypeScript libraries. It provides a complete development environment with modern tooling for building, testing, and publishing TypeScript packages. The template is designed to help developers quickly bootstrap new libraries with best practices for code quality, testing, and publishing workflows.

## Tech stack

### Language and Runtime

- **TypeScript**: Primary language with strict type checking (`@tsconfig/strictest`)
- **Node.js**: Runtime environment with ES module support
- **Target**: ES5 compatibility via transpilation

### Build and Development

- **Vite**: Modern build tool for bundling and development
- **TypeScript Compiler**: Type checking and transpilation (`tsc -b`)
- **Output**: UMD and ES module formats in `dist/`

### Testing

- **Vitest**: Test runner with `jsdom` environment
- **Coverage**: V8 coverage collection via `@vitest/coverage-v8`
- **Globals**: Test globals enabled for describe/it/expect

### Code Quality

- **ESLint**: Linting with `@typescript-eslint` and `eslint-plugin-import`
- **Prettier**: Code formatting with `prettier-plugin-organize-imports`
- **Husky**: Git hooks for automated quality checks
- **lint-staged**: Pre-commit linting and formatting

### Path Resolution

- **TypeScript paths**: `@/*` maps to `src/*` for clean imports

## Project structure

- `src/`: Source code directory
  - `index.ts`: Main entry point and primary export
  - `*.test.ts`: Test files co-located with source files
- `dist/`: Build output (generated by `npm run build`)
  - UMD and ES module bundles for distribution
- `coverage/`: Test coverage reports (generated by `npm run test:coverage`)
- Configuration files:
  - `tsconfig.json`: TypeScript compiler configuration
  - `vite.config.ts`: Vite build and test configuration
  - `eslint.config.mjs`: ESLint linting rules
  - `prettier.config.mjs`: Prettier formatting configuration
  - `lint-staged.config.mjs`: Pre-commit hook configuration

## Coding guidelines

### TypeScript Standards

- Use strict TypeScript settings (`@tsconfig/strictest`)
- Prefer explicit types on public APIs
- Use ES module syntax for imports/exports
- Prefer `export default` for main module exports
- Keep helper/internal functions private or non-exported

### Code Style

- Let Prettier handle all formatting automatically
- Imports are sorted and grouped by `prettier-plugin-organize-imports`
- Follow ESLint rules: no unused variables, typed declarations, consistent imports
- Use semicolons (enforced by Prettier)

### Documentation

- Add contract comments (2-4 bullets) above public functions
- Document: inputs, outputs, error modes, success criteria
- Update `README.md` when adding new public APIs
- Provide runnable TypeScript examples

### Testing Requirements

- Use Vitest with describe/it or test syntax
- Follow patterns in `src/index.test.ts`
- Provide happy-path and edge-case tests for new features
- Tests must be fast and deterministic
- Use `jsdom` only for DOM-related functionality

### Version Control

- Use Conventional Commits (feat/fix/docs/chore/refactor/test/build)
- Keep changes minimal and localized
- Don't modify package metadata without explicit request

## Available resources

### NPM Scripts

- `npm run build`: Build for production (`tsc -b && vite build`)
- `npm run dev`: Run tests in watch mode for development
- `npm test`: Run tests once
- `npm run test:coverage`: Run tests with coverage collection
- `npm run lint`: Lint code with ESLint
- `npm run format`: Format code with Prettier
- `npm run format:check`: Check code formatting without changes

### Development Tools

- **Husky**: Automated git hooks for quality checks
- **lint-staged**: Pre-commit linting and formatting
- **Vitest**: Test runner with hot reload in dev mode
- **TypeScript paths**: Use `@/*` imports for clean relative paths

### File Creation Patterns

- New source files should go under `src/` and tests alongside them as `src/<name>.test.ts`
- Add type-only files (e.g., `src/types.ts`) only when necessary and export types sparingly

## Examples of good prompts to follow

- **Add a small utility**
  "Create `src/isEmpty.ts` exporting a default function `isEmpty(value: unknown): boolean` that returns true for `null`, `undefined`, empty strings, empty arrays, and empty objects (no own enumerable keys). Add a 2â€“3 line contract comment and two vitest tests in `src/isEmpty.test.ts` (happy path + edge case). Keep imports organized."

- **Add tests for an existing function**
  "Add/update vitest tests for `src/index.ts` ensuring an empty-input test and a normal input test exist; use describe/it pattern."

## What not to do automatically

- Don't change `package.json` metadata like `name` or `version` unless asked
- Don't add runtime dependencies without explicit justification

## Preferred implementation style (small functions)

```typescript
// Contract
// - inputs: typed parameters
// - output: typed return value
// - errors: describe when the function throws or returns sentinel values
export default function sum(...values: number[]): number {
  return values.reduce((a, b) => a + b, 0);
}
```

If uncertain, prefer the simpler, well-typed design and add a short comment explaining trade-offs.

## Ignored paths for suggestions

- `dist/`, `.cache/`, `coverage/`, `node_modules/`

Last synced with project configuration: ESLint, Prettier, Vitest, Vite, TypeScript strict settings.
